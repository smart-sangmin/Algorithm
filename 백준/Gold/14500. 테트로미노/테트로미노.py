N, M = map(int, input().split())
paper = []
for i in range(N):
    paper.append(list(map(int, input().split())))
tetromino = (((0, 0), (0, 1), (1, 0), (1, 1)), ((0, 0), (0, 1), (0, 2), (0, 3)), ((0, 0), (1, 0), (2, 0), (3, 0)),
             ((0, 0), (1, 0), (1, 1), (2, 1)), ((0, 0), (1, 0),
                                                (1, -1), (2, -1)), ((0, 0), (0, 1), (1, 1), (1, 2)),
             ((0, 0), (0, 1), (-1, 1), (-1, 2)), ((0, 0), (0, 1),
                                                  (0, 2), (1, 2)), ((0, 0), (1, 0), (2, 0), (2, -1)),
             ((0, 0), (1, 0), (1, 1), (1, 2)), ((0, 0), (0, -1),
                                                (1, -1), (2, -1)), ((0, 0), (-1, 0), (-1, 1), (-1, 2)),
             ((0, 0), (1, 0), (2, 0), (2, 1)), ((0, 0), (0, 1),
                                                (0, 2), (-1, 2)), ((0, 0), (0, 1), (1, 1), (2, 1)),
             ((0, 0), (0, 1), (-1, 1), (0, 2)), ((0, 0), (1, 0),
                                                 (1, 1), (2, 0)), ((0, 0), (0, 1), (1, 1), (0, 2)),
             ((0, 0), (1, 0), (1, -1), (2, 0)))
answer = -1
for i in range(N):
    for j in range(M):
        for t in tetromino:
            SUM = 0
            for block_dx, block_dy in t:
                nx, ny = i + block_dx, j + block_dy
                if 0 > nx or nx >= N or 0 > ny or ny >= M:
                    break
                SUM += paper[nx][ny]
            answer = max(answer, SUM)
print(answer)
